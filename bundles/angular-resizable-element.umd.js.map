{"version":3,"file":"angular-resizable-element.umd.js","sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/angular-resizable-element/src/lib/util/is-touch-device.ts","../../../projects/angular-resizable-element/src/lib/util/clone-node.ts","../../../projects/angular-resizable-element/src/lib/resizable.directive.ts","../../../projects/angular-resizable-element/src/lib/resize-handle.directive.ts","../../../projects/angular-resizable-element/src/lib/resizable.module.ts","../../../projects/angular-resizable-element/src/public-api.ts","../../../projects/angular-resizable-element/src/angular-resizable-element.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","/**\r\n * @hidden\r\n */\r\nexport const IS_TOUCH_DEVICE: boolean = (() => {\r\n  // In case we're in Node.js environment.\r\n  if (typeof window === 'undefined') {\r\n    return false;\r\n  } else {\r\n    return (\r\n      'ontouchstart' in window ||\r\n      navigator.maxTouchPoints > 0 ||\r\n      navigator.msMaxTouchPoints > 0\r\n    );\r\n  }\r\n})();\r\n","/** Creates a deep clone of an element. */\r\nexport function deepCloneNode(node: HTMLElement): HTMLElement {\r\n  const clone = node.cloneNode(true) as HTMLElement;\r\n  const descendantsWithId = clone.querySelectorAll('[id]');\r\n  const nodeName = node.nodeName.toLowerCase();\r\n\r\n  // Remove the `id` to avoid having multiple elements with the same id on the page.\r\n  clone.removeAttribute('id');\r\n\r\n  descendantsWithId.forEach((descendant) => {\r\n    descendant.removeAttribute('id');\r\n  });\r\n\r\n  if (nodeName === 'canvas') {\r\n    transferCanvasData(node as HTMLCanvasElement, clone as HTMLCanvasElement);\r\n  } else if (\r\n    nodeName === 'input' ||\r\n    nodeName === 'select' ||\r\n    nodeName === 'textarea'\r\n  ) {\r\n    transferInputData(node as HTMLInputElement, clone as HTMLInputElement);\r\n  }\r\n\r\n  transferData('canvas', node, clone, transferCanvasData);\r\n  transferData('input, textarea, select', node, clone, transferInputData);\r\n  return clone;\r\n}\r\n\r\n/** Matches elements between an element and its clone and allows for their data to be cloned. */\r\nfunction transferData<T extends Element>(\r\n  selector: string,\r\n  node: HTMLElement,\r\n  clone: HTMLElement,\r\n  callback: (source: T, clone: T) => void\r\n) {\r\n  const descendantElements = node.querySelectorAll<T>(selector);\r\n\r\n  if (descendantElements.length) {\r\n    const cloneElements = clone.querySelectorAll<T>(selector);\r\n\r\n    for (let i = 0; i < descendantElements.length; i++) {\r\n      callback(descendantElements[i], cloneElements[i]);\r\n    }\r\n  }\r\n}\r\n\r\n// Counter for unique cloned radio button names.\r\nlet cloneUniqueId = 0;\r\n\r\n/** Transfers the data of one input element to another. */\r\nfunction transferInputData(\r\n  source: Element & { value: string },\r\n  clone: Element & { value: string; name: string; type: string }\r\n) {\r\n  // Browsers throw an error when assigning the value of a file input programmatically.\r\n  if (clone.type !== 'file') {\r\n    clone.value = source.value;\r\n  }\r\n\r\n  // Radio button `name` attributes must be unique for radio button groups\r\n  // otherwise original radio buttons can lose their checked state\r\n  // once the clone is inserted in the DOM.\r\n  if (clone.type === 'radio' && clone.name) {\r\n    clone.name = `mat-clone-${clone.name}-${cloneUniqueId++}`;\r\n  }\r\n}\r\n\r\n/** Transfers the data of one canvas element to another. */\r\nfunction transferCanvasData(\r\n  source: HTMLCanvasElement,\r\n  clone: HTMLCanvasElement\r\n) {\r\n  const context = clone.getContext('2d');\r\n\r\n  if (context) {\r\n    // In some cases `drawImage` can throw (e.g. if the canvas size is 0x0).\r\n    // We can't do much about it so just ignore the error.\r\n    try {\r\n      context.drawImage(source, 0, 0);\r\n    } catch {}\r\n  }\r\n}\r\n","import {\r\n  Directive,\r\n  Renderer2,\r\n  ElementRef,\r\n  OnInit,\r\n  Output,\r\n  Input,\r\n  EventEmitter,\r\n  OnDestroy,\r\n  NgZone,\r\n  Inject,\r\n  PLATFORM_ID,\r\n} from '@angular/core';\r\nimport { isPlatformBrowser } from '@angular/common';\r\nimport { Subject, Observable, Observer, merge } from 'rxjs';\r\nimport {\r\n  map,\r\n  mergeMap,\r\n  takeUntil,\r\n  filter,\r\n  pairwise,\r\n  take,\r\n  share,\r\n  tap,\r\n} from 'rxjs/operators';\r\nimport { Edges } from './interfaces/edges.interface';\r\nimport { BoundingRectangle } from './interfaces/bounding-rectangle.interface';\r\nimport { ClickEvent } from './interfaces/click-event.interface';\r\nimport { ResizeEvent } from './interfaces/resize-event.interface';\r\nimport { IS_TOUCH_DEVICE } from './util/is-touch-device';\r\nimport { deepCloneNode } from './util/clone-node';\r\n\r\ninterface PointerEventCoordinate {\r\n  clientX: number;\r\n  clientY: number;\r\n  event: MouseEvent | TouchEvent;\r\n}\r\n\r\ninterface Coordinate {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\nfunction getNewBoundingRectangle(\r\n  startingRect: BoundingRectangle,\r\n  edges: Edges,\r\n  clientX: number,\r\n  clientY: number\r\n): BoundingRectangle {\r\n  const newBoundingRect: BoundingRectangle = {\r\n    top: startingRect.top,\r\n    bottom: startingRect.bottom,\r\n    left: startingRect.left,\r\n    right: startingRect.right,\r\n  };\r\n\r\n  if (edges.top) {\r\n    newBoundingRect.top += clientY;\r\n  }\r\n  if (edges.bottom) {\r\n    newBoundingRect.bottom += clientY;\r\n  }\r\n  if (edges.left) {\r\n    newBoundingRect.left += clientX;\r\n  }\r\n  if (edges.right) {\r\n    newBoundingRect.right += clientX;\r\n  }\r\n  newBoundingRect.height = newBoundingRect.bottom - newBoundingRect.top;\r\n  newBoundingRect.width = newBoundingRect.right - newBoundingRect.left;\r\n\r\n  return newBoundingRect;\r\n}\r\n\r\nfunction getElementRect(\r\n  element: ElementRef,\r\n  ghostElementPositioning: string\r\n): BoundingRectangle {\r\n  let translateX = 0;\r\n  let translateY = 0;\r\n  const style = element.nativeElement.style;\r\n  const transformProperties = [\r\n    'transform',\r\n    '-ms-transform',\r\n    '-moz-transform',\r\n    '-o-transform',\r\n  ];\r\n  const transform = transformProperties\r\n    .map((property) => style[property])\r\n    .find((value) => !!value);\r\n  if (transform && transform.includes('translate')) {\r\n    translateX = transform.replace(\r\n      /.*translate3?d?\\((-?[0-9]*)px, (-?[0-9]*)px.*/,\r\n      '$1'\r\n    );\r\n    translateY = transform.replace(\r\n      /.*translate3?d?\\((-?[0-9]*)px, (-?[0-9]*)px.*/,\r\n      '$2'\r\n    );\r\n  }\r\n\r\n  if (ghostElementPositioning === 'absolute') {\r\n    return {\r\n      height: element.nativeElement.offsetHeight,\r\n      width: element.nativeElement.offsetWidth,\r\n      top: element.nativeElement.offsetTop - translateY,\r\n      bottom:\r\n        element.nativeElement.offsetHeight +\r\n        element.nativeElement.offsetTop -\r\n        translateY,\r\n      left: element.nativeElement.offsetLeft - translateX,\r\n      right:\r\n        element.nativeElement.offsetWidth +\r\n        element.nativeElement.offsetLeft -\r\n        translateX,\r\n    };\r\n  } else {\r\n    const boundingRect: BoundingRectangle =\r\n      element.nativeElement.getBoundingClientRect();\r\n    return {\r\n      height: boundingRect.height,\r\n      width: boundingRect.width,\r\n      top: boundingRect.top - translateY,\r\n      bottom: boundingRect.bottom - translateY,\r\n      left: boundingRect.left - translateX,\r\n      right: boundingRect.right - translateX,\r\n      scrollTop: element.nativeElement.scrollTop,\r\n      scrollLeft: element.nativeElement.scrollLeft,\r\n    };\r\n  }\r\n}\r\n\r\nexport interface ResizeCursors {\r\n  topLeft: string;\r\n  topRight: string;\r\n  bottomLeft: string;\r\n  bottomRight: string;\r\n  leftOrRight: string;\r\n  topOrBottom: string;\r\n}\r\n\r\nconst DEFAULT_RESIZE_CURSORS: ResizeCursors = Object.freeze({\r\n  topLeft: 'nw-resize',\r\n  topRight: 'ne-resize',\r\n  bottomLeft: 'sw-resize',\r\n  bottomRight: 'se-resize',\r\n  leftOrRight: 'col-resize',\r\n  topOrBottom: 'row-resize',\r\n});\r\n\r\nfunction getResizeCursor(edges: Edges, cursors: ResizeCursors): string {\r\n  if (edges.left && edges.top) {\r\n    return cursors.topLeft;\r\n  } else if (edges.right && edges.top) {\r\n    return cursors.topRight;\r\n  } else if (edges.left && edges.bottom) {\r\n    return cursors.bottomLeft;\r\n  } else if (edges.right && edges.bottom) {\r\n    return cursors.bottomRight;\r\n  } else if (edges.left || edges.right) {\r\n    return cursors.leftOrRight;\r\n  } else if (edges.top || edges.bottom) {\r\n    return cursors.topOrBottom;\r\n  } else {\r\n    return '';\r\n  }\r\n}\r\n\r\nexport type EdgesDiff = {\r\n  [Property in keyof Edges]: Exclude<Edges[Property], boolean>;\r\n};\r\n\r\nfunction getEdgesDiff({\r\n  edges,\r\n  initialRectangle,\r\n  newRectangle,\r\n}: {\r\n  edges: Edges;\r\n  initialRectangle: BoundingRectangle;\r\n  newRectangle: BoundingRectangle;\r\n}): EdgesDiff {\r\n  const edgesDiff: EdgesDiff = {};\r\n  Object.keys(edges).forEach((edge) => {\r\n    edgesDiff[edge] = (newRectangle[edge] || 0) - (initialRectangle[edge] || 0);\r\n  });\r\n  return edgesDiff;\r\n}\r\n\r\nconst getTotalDiff = (edgesDiff: EdgesDiff) =>\r\n  Object.values(edgesDiff)\r\n    .map((edge) => Math.abs(edge || 0))\r\n    .reduce((a, b) => Math.max(a, b), 0);\r\n\r\nconst RESIZE_ACTIVE_CLASS: string = 'resize-active';\r\nconst RESIZE_GHOST_ELEMENT_CLASS: string = 'resize-ghost-element';\r\n\r\nexport const MOUSE_MOVE_THROTTLE_MS: number = 50;\r\n\r\nexport const DISABLE_CLICK_MOVE_THRESHOLD: number = 0;\r\n\r\n/**\r\n * Place this on an element to make it resizable. For example:\r\n *\r\n * ```html\r\n * <div\r\n *   mwlResizable\r\n *   [resizeEdges]=\"{bottom: true, right: true, top: true, left: true}\"\r\n *   [enableGhostResize]=\"true\">\r\n * </div>\r\n * ```\r\n * Or in case they are sibling elements:\r\n * ```html\r\n * <div mwlResizable #resizableElement=\"mwlResizable\"></div>\r\n * <div mwlResizeHandle [resizableContainer]=\"resizableElement\" [resizeEdges]=\"{bottom: true, right: true}\"></div>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: '[mwlResizable]',\r\n  exportAs: 'mwlResizable',\r\n})\r\nexport class ResizableDirective implements OnInit, OnDestroy {\r\n  /**\r\n   * A function that will be called before each resize event. Return `true` to allow the resize event to propagate or `false` to cancel it\r\n   */\r\n  @Input() validateResize: (resizeEvent: ResizeEvent) => boolean;\r\n\r\n  /**\r\n   * Set to `true` to enable a temporary resizing effect of the element in between the `resizeStart` and `resizeEnd` events.\r\n   */\r\n  @Input() enableGhostResize: boolean = false;\r\n\r\n  /**\r\n   * A snap grid that resize events will be locked to.\r\n   *\r\n   * e.g. to only allow the element to be resized every 10px set it to `{left: 10, right: 10}`\r\n   */\r\n  @Input() resizeSnapGrid: Edges = {};\r\n\r\n  /**\r\n   * The mouse cursors that will be set on the resize edges\r\n   */\r\n  @Input() resizeCursors: ResizeCursors = DEFAULT_RESIZE_CURSORS;\r\n\r\n  /**\r\n   * Define the positioning of the ghost element (can be fixed or absolute)\r\n   */\r\n  @Input() ghostElementPositioning: 'fixed' | 'absolute' = 'fixed';\r\n\r\n  /**\r\n   * Allow elements to be resized to negative dimensions\r\n   */\r\n  @Input() allowNegativeResizes: boolean = false;\r\n\r\n  /**\r\n   * The mouse move throttle in milliseconds, default: 50 ms\r\n   */\r\n  @Input() mouseMoveThrottleMS: number = MOUSE_MOVE_THROTTLE_MS;\r\n\r\n  /**\r\n   * The distance in pixels that the mouse must move to trigger a resize event, <= 0 to disable (default)\r\n   *\r\n   * Below this threshold, a click event will be emitted instead\r\n   */\r\n  @Input() resizeMoveThreshold: number = DISABLE_CLICK_MOVE_THRESHOLD;\r\n\r\n  /**\r\n   * Called when the mouse is pressed and a resize event is about to begin. `$event` is a `ResizeEvent` object.\r\n   */\r\n  @Output() resizeStart = new EventEmitter<ResizeEvent>();\r\n\r\n  /**\r\n   * Called as the mouse is dragged after a resize event has begun. `$event` is a `ResizeEvent` object.\r\n   */\r\n  @Output() resizing = new EventEmitter<ResizeEvent>();\r\n\r\n  /**\r\n   * Called after the mouse is released after a resize event. `$event` is a `ResizeEvent` object.\r\n   */\r\n  @Output() resizeEnd = new EventEmitter<ResizeEvent>();\r\n\r\n  /**\r\n   * Called after the mouse is released after a click event. `$event` is a `ClickEvent` object.\r\n   */\r\n  @Output() clicked = new EventEmitter<ClickEvent>();\r\n\r\n  /**\r\n   * @hidden\r\n   */\r\n  public mouseup = new Subject<{\r\n    clientX: number;\r\n    clientY: number;\r\n    edges?: Edges;\r\n  }>();\r\n\r\n  /**\r\n   * @hidden\r\n   */\r\n  public mousedown = new Subject<{\r\n    clientX: number;\r\n    clientY: number;\r\n    edges?: Edges;\r\n  }>();\r\n\r\n  /**\r\n   * @hidden\r\n   */\r\n  public mousemove = new Subject<{\r\n    clientX: number;\r\n    clientY: number;\r\n    edges?: Edges;\r\n    event: MouseEvent | TouchEvent;\r\n  }>();\r\n\r\n  private pointerEventListeners: PointerEventListeners;\r\n\r\n  private destroy$ = new Subject<void>();\r\n\r\n  /**\r\n   * @hidden\r\n   */\r\n  constructor(\r\n    @Inject(PLATFORM_ID) private platformId: any,\r\n    private renderer: Renderer2,\r\n    public elm: ElementRef,\r\n    private zone: NgZone\r\n  ) {\r\n    this.pointerEventListeners = PointerEventListeners.getInstance(\r\n      renderer,\r\n      zone\r\n    );\r\n  }\r\n\r\n  /**\r\n   * @hidden\r\n   */\r\n  ngOnInit(): void {\r\n    const mousedown$: Observable<{\r\n      clientX: number;\r\n      clientY: number;\r\n      edges?: Edges;\r\n    }> = merge(this.pointerEventListeners.pointerDown, this.mousedown);\r\n\r\n    const mousemove$ = merge(\r\n      this.pointerEventListeners.pointerMove,\r\n      this.mousemove\r\n    ).pipe(\r\n      tap(({ event }) => {\r\n        if (currentResize) {\r\n          try {\r\n            event.preventDefault();\r\n          } catch (e) {\r\n            // just adding try-catch not to see errors in console if there is a passive listener for same event somewhere\r\n            // browser does nothing except of writing errors to console\r\n          }\r\n        }\r\n      }),\r\n      share()\r\n    );\r\n\r\n    const mouseup$ = merge(this.pointerEventListeners.pointerUp, this.mouseup);\r\n\r\n    let currentResize: {\r\n      edges: Edges;\r\n      startingRect: BoundingRectangle;\r\n      currentRect: BoundingRectangle;\r\n      clonedNode?: HTMLElement;\r\n      visible: boolean;\r\n    } | null;\r\n\r\n    const removeGhostElement = () => {\r\n      if (currentResize && currentResize.clonedNode) {\r\n        this.elm.nativeElement.parentElement.removeChild(\r\n          currentResize.clonedNode\r\n        );\r\n        this.renderer.setStyle(this.elm.nativeElement, 'visibility', 'inherit');\r\n      }\r\n    };\r\n\r\n    const getResizeCursors = (): ResizeCursors => {\r\n      return {\r\n        ...DEFAULT_RESIZE_CURSORS,\r\n        ...this.resizeCursors,\r\n      };\r\n    };\r\n\r\n    const startVisibleResize = (): void => {\r\n      currentResize!.visible = true;\r\n      const resizeCursors = getResizeCursors();\r\n      const cursor = getResizeCursor(currentResize!.edges, resizeCursors);\r\n      this.renderer.setStyle(document.body, 'cursor', cursor);\r\n      this.setElementClass(this.elm, RESIZE_ACTIVE_CLASS, true);\r\n      if (this.enableGhostResize) {\r\n        currentResize!.clonedNode = deepCloneNode(this.elm.nativeElement);\r\n        this.elm.nativeElement.parentElement.appendChild(\r\n          currentResize!.clonedNode\r\n        );\r\n        this.renderer.setStyle(this.elm.nativeElement, 'visibility', 'hidden');\r\n        this.renderer.setStyle(\r\n          currentResize!.clonedNode,\r\n          'position',\r\n          this.ghostElementPositioning\r\n        );\r\n        this.renderer.setStyle(\r\n          currentResize!.clonedNode,\r\n          'left',\r\n          `${currentResize!.startingRect.left}px`\r\n        );\r\n        this.renderer.setStyle(\r\n          currentResize!.clonedNode,\r\n          'top',\r\n          `${currentResize!.startingRect.top}px`\r\n        );\r\n        this.renderer.setStyle(\r\n          currentResize!.clonedNode,\r\n          'height',\r\n          `${currentResize!.startingRect.height}px`\r\n        );\r\n        this.renderer.setStyle(\r\n          currentResize!.clonedNode,\r\n          'width',\r\n          `${currentResize!.startingRect.width}px`\r\n        );\r\n        this.renderer.setStyle(\r\n          currentResize!.clonedNode,\r\n          'cursor',\r\n          getResizeCursor(currentResize!.edges, resizeCursors)\r\n        );\r\n        this.renderer.addClass(\r\n          currentResize!.clonedNode,\r\n          RESIZE_GHOST_ELEMENT_CLASS\r\n        );\r\n        currentResize!.clonedNode!.scrollTop = currentResize!.startingRect\r\n          .scrollTop as number;\r\n        currentResize!.clonedNode!.scrollLeft = currentResize!.startingRect\r\n          .scrollLeft as number;\r\n      }\r\n      if (this.resizeStart.observers.length > 0) {\r\n        this.zone.run(() => {\r\n          this.resizeStart.emit({\r\n            edges: getEdgesDiff({\r\n              edges: currentResize!.edges,\r\n              initialRectangle: currentResize!.startingRect,\r\n              newRectangle: currentResize!.startingRect,\r\n            }),\r\n            rectangle: getNewBoundingRectangle(\r\n              currentResize!.startingRect,\r\n              {},\r\n              0,\r\n              0\r\n            ),\r\n          });\r\n        });\r\n      }\r\n    };\r\n\r\n    const mousedrag: Observable<any> = mousedown$\r\n      .pipe(\r\n        mergeMap((startCoords) => {\r\n          function getDiff(moveCoords: { clientX: number; clientY: number }) {\r\n            return {\r\n              clientX: moveCoords.clientX - startCoords.clientX,\r\n              clientY: moveCoords.clientY - startCoords.clientY,\r\n            };\r\n          }\r\n\r\n          const getSnapGrid = () => {\r\n            const snapGrid: Coordinate = { x: 1, y: 1 };\r\n\r\n            if (currentResize) {\r\n              if (this.resizeSnapGrid.left && currentResize.edges.left) {\r\n                snapGrid.x = +this.resizeSnapGrid.left;\r\n              } else if (\r\n                this.resizeSnapGrid.right &&\r\n                currentResize.edges.right\r\n              ) {\r\n                snapGrid.x = +this.resizeSnapGrid.right;\r\n              }\r\n\r\n              if (this.resizeSnapGrid.top && currentResize.edges.top) {\r\n                snapGrid.y = +this.resizeSnapGrid.top;\r\n              } else if (\r\n                this.resizeSnapGrid.bottom &&\r\n                currentResize.edges.bottom\r\n              ) {\r\n                snapGrid.y = +this.resizeSnapGrid.bottom;\r\n              }\r\n            }\r\n\r\n            return snapGrid;\r\n          };\r\n\r\n          function getGrid(\r\n            coords: { clientX: number; clientY: number },\r\n            snapGrid: Coordinate\r\n          ) {\r\n            return {\r\n              x: Math.ceil(coords.clientX / snapGrid.x),\r\n              y: Math.ceil(coords.clientY / snapGrid.y),\r\n            };\r\n          }\r\n\r\n          return (\r\n            merge(\r\n              mousemove$.pipe(take(1)).pipe(map((coords) => [, coords])),\r\n              mousemove$.pipe(pairwise())\r\n            ) as Observable<\r\n              [\r\n                { clientX: number; clientY: number },\r\n                { clientX: number; clientY: number }\r\n              ]\r\n            >\r\n          )\r\n            .pipe(\r\n              map(([previousCoords, newCoords]) => {\r\n                return [\r\n                  previousCoords ? getDiff(previousCoords) : previousCoords,\r\n                  getDiff(newCoords),\r\n                ];\r\n              })\r\n            )\r\n            .pipe(\r\n              filter(([previousCoords, newCoords]) => {\r\n                if (!previousCoords) {\r\n                  return true;\r\n                }\r\n\r\n                const snapGrid: Coordinate = getSnapGrid();\r\n                const previousGrid: Coordinate = getGrid(\r\n                  previousCoords,\r\n                  snapGrid\r\n                );\r\n                const newGrid: Coordinate = getGrid(newCoords, snapGrid);\r\n\r\n                return (\r\n                  previousGrid.x !== newGrid.x || previousGrid.y !== newGrid.y\r\n                );\r\n              })\r\n            )\r\n            .pipe(\r\n              map(([, newCoords]) => {\r\n                const snapGrid: Coordinate = getSnapGrid();\r\n                return {\r\n                  clientX:\r\n                    Math.round(newCoords.clientX / snapGrid.x) * snapGrid.x,\r\n                  clientY:\r\n                    Math.round(newCoords.clientY / snapGrid.y) * snapGrid.y,\r\n                };\r\n              })\r\n            )\r\n            .pipe(takeUntil(merge(mouseup$, mousedown$)));\r\n        })\r\n      )\r\n      .pipe(filter(() => !!currentResize));\r\n\r\n    mousedrag\r\n      .pipe(\r\n        map(({ clientX, clientY }) => {\r\n          return getNewBoundingRectangle(\r\n            currentResize!.startingRect,\r\n            currentResize!.edges,\r\n            clientX,\r\n            clientY\r\n          );\r\n        })\r\n      )\r\n      .pipe(\r\n        filter((newBoundingRect: BoundingRectangle) => {\r\n          return (\r\n            this.allowNegativeResizes ||\r\n            !!(\r\n              newBoundingRect.height &&\r\n              newBoundingRect.width &&\r\n              newBoundingRect.height > 0 &&\r\n              newBoundingRect.width > 0\r\n            )\r\n          );\r\n        })\r\n      )\r\n      .pipe(\r\n        filter((newBoundingRect: BoundingRectangle) => {\r\n          return this.validateResize\r\n            ? this.validateResize({\r\n                rectangle: newBoundingRect,\r\n                edges: getEdgesDiff({\r\n                  edges: currentResize!.edges,\r\n                  initialRectangle: currentResize!.startingRect,\r\n                  newRectangle: newBoundingRect,\r\n                }),\r\n              })\r\n            : true;\r\n        }),\r\n        takeUntil(this.destroy$)\r\n      )\r\n      .subscribe((newBoundingRect: BoundingRectangle) => {\r\n        const edges = getEdgesDiff({\r\n          edges: currentResize!.edges,\r\n          initialRectangle: currentResize!.startingRect,\r\n          newRectangle: newBoundingRect,\r\n        });\r\n        if (\r\n          !currentResize!.visible &&\r\n          getTotalDiff(edges) >= this.resizeMoveThreshold\r\n        ) {\r\n          startVisibleResize();\r\n        }\r\n        if (currentResize!.visible && currentResize!.clonedNode) {\r\n          this.renderer.setStyle(\r\n            currentResize!.clonedNode,\r\n            'height',\r\n            `${newBoundingRect.height}px`\r\n          );\r\n          this.renderer.setStyle(\r\n            currentResize!.clonedNode,\r\n            'width',\r\n            `${newBoundingRect.width}px`\r\n          );\r\n          this.renderer.setStyle(\r\n            currentResize!.clonedNode,\r\n            'top',\r\n            `${newBoundingRect.top}px`\r\n          );\r\n          this.renderer.setStyle(\r\n            currentResize!.clonedNode,\r\n            'left',\r\n            `${newBoundingRect.left}px`\r\n          );\r\n        }\r\n\r\n        if (currentResize!.visible && this.resizing.observers.length > 0) {\r\n          this.zone.run(() => {\r\n            this.resizing.emit({\r\n              edges,\r\n              rectangle: newBoundingRect,\r\n            });\r\n          });\r\n        }\r\n        currentResize!.currentRect = newBoundingRect;\r\n      });\r\n\r\n    mousedown$\r\n      .pipe(\r\n        map(({ edges }) => {\r\n          return edges || {};\r\n        }),\r\n        filter((edges: Edges) => {\r\n          return Object.keys(edges).length > 0;\r\n        }),\r\n        takeUntil(this.destroy$)\r\n      )\r\n      .subscribe((edges: Edges) => {\r\n        if (currentResize) {\r\n          removeGhostElement();\r\n        }\r\n        const startingRect: BoundingRectangle = getElementRect(\r\n          this.elm,\r\n          this.ghostElementPositioning\r\n        );\r\n        currentResize = {\r\n          edges,\r\n          startingRect,\r\n          currentRect: startingRect,\r\n          visible: false,\r\n        };\r\n        if (this.resizeMoveThreshold <= 0) {\r\n          startVisibleResize();\r\n        }\r\n      });\r\n\r\n    mouseup$.pipe(takeUntil(this.destroy$)).subscribe((event) => {\r\n      if (!currentResize) {\r\n        return;\r\n      }\r\n      if (currentResize.visible) {\r\n        this.renderer.removeClass(this.elm.nativeElement, RESIZE_ACTIVE_CLASS);\r\n        this.renderer.setStyle(document.body, 'cursor', '');\r\n        this.renderer.setStyle(this.elm.nativeElement, 'cursor', '');\r\n        if (this.resizeEnd.observers.length > 0) {\r\n          this.zone.run(() => {\r\n            this.resizeEnd.emit({\r\n              edges: getEdgesDiff({\r\n                edges: currentResize!.edges,\r\n                initialRectangle: currentResize!.startingRect,\r\n                newRectangle: currentResize!.currentRect,\r\n              }),\r\n              rectangle: currentResize!.currentRect,\r\n            });\r\n          });\r\n        }\r\n        removeGhostElement();\r\n      } else {\r\n        if (this.clicked.observers.length > 0) {\r\n          this.zone.run(() => {\r\n            this.clicked.emit(event);\r\n          });\r\n        }\r\n      }\r\n      currentResize = null;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @hidden\r\n   */\r\n  ngOnDestroy(): void {\r\n    // browser check for angular universal, because it doesn't know what document is\r\n    if (isPlatformBrowser(this.platformId)) {\r\n      this.renderer.setStyle(document.body, 'cursor', '');\r\n    }\r\n    this.mousedown.complete();\r\n    this.mouseup.complete();\r\n    this.mousemove.complete();\r\n    this.destroy$.next();\r\n  }\r\n\r\n  private setElementClass(elm: ElementRef, name: string, add: boolean): void {\r\n    if (add) {\r\n      this.renderer.addClass(elm.nativeElement, name);\r\n    } else {\r\n      this.renderer.removeClass(elm.nativeElement, name);\r\n    }\r\n  }\r\n}\r\n\r\nclass PointerEventListeners {\r\n  public pointerDown: Observable<PointerEventCoordinate>;\r\n\r\n  public pointerMove: Observable<PointerEventCoordinate>;\r\n\r\n  public pointerUp: Observable<PointerEventCoordinate>;\r\n\r\n  private static instance: PointerEventListeners;\r\n\r\n  public static getInstance(\r\n    renderer: Renderer2,\r\n    zone: NgZone\r\n  ): PointerEventListeners {\r\n    if (!PointerEventListeners.instance) {\r\n      PointerEventListeners.instance = new PointerEventListeners(\r\n        renderer,\r\n        zone\r\n      );\r\n    }\r\n    return PointerEventListeners.instance;\r\n  }\r\n\r\n  constructor(renderer: Renderer2, zone: NgZone) {\r\n    this.pointerDown = new Observable(\r\n      (observer: Observer<PointerEventCoordinate>) => {\r\n        let unsubscribeMouseDown: () => void;\r\n        let unsubscribeTouchStart: (() => void) | undefined;\r\n\r\n        zone.runOutsideAngular(() => {\r\n          unsubscribeMouseDown = renderer.listen(\r\n            'document',\r\n            'mousedown',\r\n            (event: MouseEvent) => {\r\n              observer.next({\r\n                clientX: event.clientX,\r\n                clientY: event.clientY,\r\n                event,\r\n              });\r\n            }\r\n          );\r\n\r\n          if (IS_TOUCH_DEVICE) {\r\n            unsubscribeTouchStart = renderer.listen(\r\n              'document',\r\n              'touchstart',\r\n              (event: TouchEvent) => {\r\n                observer.next({\r\n                  clientX: event.touches[0].clientX,\r\n                  clientY: event.touches[0].clientY,\r\n                  event,\r\n                });\r\n              }\r\n            );\r\n          }\r\n        });\r\n\r\n        return () => {\r\n          unsubscribeMouseDown();\r\n          if (IS_TOUCH_DEVICE) {\r\n            unsubscribeTouchStart!();\r\n          }\r\n        };\r\n      }\r\n    ).pipe(share());\r\n\r\n    this.pointerMove = new Observable(\r\n      (observer: Observer<PointerEventCoordinate>) => {\r\n        let unsubscribeMouseMove: () => void;\r\n        let unsubscribeTouchMove: (() => void) | undefined;\r\n\r\n        zone.runOutsideAngular(() => {\r\n          unsubscribeMouseMove = renderer.listen(\r\n            'document',\r\n            'mousemove',\r\n            (event: MouseEvent) => {\r\n              observer.next({\r\n                clientX: event.clientX,\r\n                clientY: event.clientY,\r\n                event,\r\n              });\r\n            }\r\n          );\r\n\r\n          if (IS_TOUCH_DEVICE) {\r\n            unsubscribeTouchMove = renderer.listen(\r\n              'document',\r\n              'touchmove',\r\n              (event: TouchEvent) => {\r\n                observer.next({\r\n                  clientX: event.targetTouches[0].clientX,\r\n                  clientY: event.targetTouches[0].clientY,\r\n                  event,\r\n                });\r\n              }\r\n            );\r\n          }\r\n        });\r\n\r\n        return () => {\r\n          unsubscribeMouseMove();\r\n          if (IS_TOUCH_DEVICE) {\r\n            unsubscribeTouchMove!();\r\n          }\r\n        };\r\n      }\r\n    ).pipe(share());\r\n\r\n    this.pointerUp = new Observable(\r\n      (observer: Observer<PointerEventCoordinate>) => {\r\n        let unsubscribeMouseUp: () => void;\r\n        let unsubscribeTouchEnd: (() => void) | undefined;\r\n        let unsubscribeTouchCancel: (() => void) | undefined;\r\n\r\n        zone.runOutsideAngular(() => {\r\n          unsubscribeMouseUp = renderer.listen(\r\n            'document',\r\n            'mouseup',\r\n            (event: MouseEvent) => {\r\n              observer.next({\r\n                clientX: event.clientX,\r\n                clientY: event.clientY,\r\n                event,\r\n              });\r\n            }\r\n          );\r\n\r\n          if (IS_TOUCH_DEVICE) {\r\n            unsubscribeTouchEnd = renderer.listen(\r\n              'document',\r\n              'touchend',\r\n              (event: TouchEvent) => {\r\n                observer.next({\r\n                  clientX: event.changedTouches[0].clientX,\r\n                  clientY: event.changedTouches[0].clientY,\r\n                  event,\r\n                });\r\n              }\r\n            );\r\n\r\n            unsubscribeTouchCancel = renderer.listen(\r\n              'document',\r\n              'touchcancel',\r\n              (event: TouchEvent) => {\r\n                observer.next({\r\n                  clientX: event.changedTouches[0].clientX,\r\n                  clientY: event.changedTouches[0].clientY,\r\n                  event,\r\n                });\r\n              }\r\n            );\r\n          }\r\n        });\r\n\r\n        return () => {\r\n          unsubscribeMouseUp();\r\n          if (IS_TOUCH_DEVICE) {\r\n            unsubscribeTouchEnd!();\r\n            unsubscribeTouchCancel!();\r\n          }\r\n        };\r\n      }\r\n    ).pipe(share());\r\n  }\r\n}\r\n","import {\r\n  Directive,\r\n  Input,\r\n  Renderer2,\r\n  ElementRef,\r\n  OnInit,\r\n  OnDestroy,\r\n  NgZone,\r\n  Optional,\r\n} from '@angular/core';\r\nimport { fromEvent, merge, Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { ResizableDirective } from './resizable.directive';\r\nimport { Edges } from './interfaces/edges.interface';\r\nimport { IS_TOUCH_DEVICE } from './util/is-touch-device';\r\n\r\n/**\r\n * An element placed inside a `mwlResizable` directive to be used as a drag and resize handle\r\n *\r\n * For example\r\n *\r\n * ```html\r\n * <div mwlResizable>\r\n *   <div mwlResizeHandle [resizeEdges]=\"{bottom: true, right: true}\"></div>\r\n * </div>\r\n * ```\r\n * Or in case they are sibling elements:\r\n * ```html\r\n * <div mwlResizable #resizableElement=\"mwlResizable\"></div>\r\n * <div mwlResizeHandle [resizableContainer]=\"resizableElement\" [resizeEdges]=\"{bottom: true, right: true}\"></div>\r\n * ```\r\n */\r\n@Directive({\r\n  selector: '[mwlResizeHandle]',\r\n})\r\nexport class ResizeHandleDirective implements OnInit, OnDestroy {\r\n  /**\r\n   * The `Edges` object that contains the edges of the parent element that dragging the handle will trigger a resize on\r\n   */\r\n  @Input() resizeEdges: Edges = {};\r\n  /**\r\n   * Reference to ResizableDirective in case if handle is not located inside of element with ResizableDirective\r\n   */\r\n  @Input() resizableContainer: ResizableDirective;\r\n\r\n  private eventListeners: {\r\n    touchmove?: () => void;\r\n    mousemove?: () => void;\r\n    [key: string]: (() => void) | undefined;\r\n  } = {};\r\n\r\n  private destroy$ = new Subject<void>();\r\n\r\n  constructor(\r\n    private renderer: Renderer2,\r\n    private element: ElementRef,\r\n    private zone: NgZone,\r\n    @Optional() private resizableDirective: ResizableDirective\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.zone.runOutsideAngular(() => {\r\n      this.listenOnTheHost<MouseEvent>('mousedown').subscribe((event) => {\r\n        this.onMousedown(event, event.clientX, event.clientY);\r\n      });\r\n\r\n      this.listenOnTheHost<MouseEvent>('mouseup').subscribe((event) => {\r\n        this.onMouseup(event.clientX, event.clientY);\r\n      });\r\n\r\n      if (IS_TOUCH_DEVICE) {\r\n        this.listenOnTheHost<TouchEvent>('touchstart').subscribe((event) => {\r\n          this.onMousedown(\r\n            event,\r\n            event.touches[0].clientX,\r\n            event.touches[0].clientY\r\n          );\r\n        });\r\n\r\n        merge(\r\n          this.listenOnTheHost<TouchEvent>('touchend'),\r\n          this.listenOnTheHost<TouchEvent>('touchcancel')\r\n        ).subscribe((event) => {\r\n          this.onMouseup(\r\n            event.changedTouches[0].clientX,\r\n            event.changedTouches[0].clientY\r\n          );\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.unsubscribeEventListeners();\r\n  }\r\n\r\n  /**\r\n   * @hidden\r\n   */\r\n  onMousedown(\r\n    event: MouseEvent | TouchEvent,\r\n    clientX: number,\r\n    clientY: number\r\n  ): void {\r\n    event.preventDefault();\r\n    if (!this.eventListeners.touchmove) {\r\n      this.eventListeners.touchmove = this.renderer.listen(\r\n        this.element.nativeElement,\r\n        'touchmove',\r\n        (touchMoveEvent: TouchEvent) => {\r\n          this.onMousemove(\r\n            touchMoveEvent,\r\n            touchMoveEvent.targetTouches[0].clientX,\r\n            touchMoveEvent.targetTouches[0].clientY\r\n          );\r\n        }\r\n      );\r\n    }\r\n    if (!this.eventListeners.mousemove) {\r\n      this.eventListeners.mousemove = this.renderer.listen(\r\n        this.element.nativeElement,\r\n        'mousemove',\r\n        (mouseMoveEvent: MouseEvent) => {\r\n          this.onMousemove(\r\n            mouseMoveEvent,\r\n            mouseMoveEvent.clientX,\r\n            mouseMoveEvent.clientY\r\n          );\r\n        }\r\n      );\r\n    }\r\n    this.resizable.mousedown.next({\r\n      clientX,\r\n      clientY,\r\n      edges: this.resizeEdges,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @hidden\r\n   */\r\n  onMouseup(clientX: number, clientY: number): void {\r\n    this.unsubscribeEventListeners();\r\n    this.resizable.mouseup.next({\r\n      clientX,\r\n      clientY,\r\n      edges: this.resizeEdges,\r\n    });\r\n  }\r\n\r\n  // directive might be passed from DI or as an input\r\n  private get resizable(): ResizableDirective {\r\n    return this.resizableDirective || this.resizableContainer;\r\n  }\r\n\r\n  private onMousemove(\r\n    event: MouseEvent | TouchEvent,\r\n    clientX: number,\r\n    clientY: number\r\n  ): void {\r\n    this.resizable.mousemove.next({\r\n      clientX,\r\n      clientY,\r\n      edges: this.resizeEdges,\r\n      event,\r\n    });\r\n  }\r\n\r\n  private unsubscribeEventListeners(): void {\r\n    Object.keys(this.eventListeners).forEach((type) => {\r\n      (this as any).eventListeners[type]();\r\n      delete this.eventListeners[type];\r\n    });\r\n  }\r\n\r\n  private listenOnTheHost<T extends Event>(eventName: string) {\r\n    return fromEvent<T>(this.element.nativeElement, eventName).pipe(\r\n      takeUntil(this.destroy$)\r\n    );\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { ResizableDirective } from './resizable.directive';\r\nimport { ResizeHandleDirective } from './resize-handle.directive';\r\n\r\n@NgModule({\r\n  declarations: [ResizableDirective, ResizeHandleDirective],\r\n  exports: [ResizableDirective, ResizeHandleDirective],\r\n})\r\nexport class ResizableModule {}\r\n","/*\r\n * Public API Surface of angular-resizable-element\r\n */\r\n\r\nexport * from './lib/resizable.module';\r\nexport { BoundingRectangle } from './lib/interfaces/bounding-rectangle.interface';\r\nexport { Edges } from './lib/interfaces/edges.interface';\r\nexport { ResizeEvent } from './lib/interfaces/resize-event.interface';\r\nexport { ResizableDirective } from './lib/resizable.directive';\r\nexport { ResizeHandleDirective } from './lib/resize-handle.directive';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["EventEmitter","Subject","merge","tap","share","mergeMap","take","map","pairwise","filter","takeUntil","isPlatformBrowser","PLATFORM_ID","Directive","Inject","Input","Output","Observable","fromEvent","Optional","NgModule"],"mappings":"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"}